{"ast":null,"code":"class MainApi {\n  constructor({\n    url\n  }) {\n    this._url = url;\n  }\n  _processResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res);\n    }\n  }\n  async getUserData() {\n    const res = await fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._processResponse(res);\n  }\n  async setUserData(userData) {\n    const res = await fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body: JSON.stringify({\n        name: userData.name,\n        email: userData.email\n      })\n    });\n    return this._processResponse(res);\n  }\n  async getSavedMovies() {\n    const res = await fetch(`${this._url}/movies`, {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._processResponse(res);\n  }\n  async addNewMovie(movie) {\n    const res = await fetch(`${this._url}/movies`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      },\n      body: JSON.stringify({\n        movieId: movie.id,\n        nameRU: movie.nameRU,\n        nameEN: movie.nameEN,\n        description: movie.description,\n        director: movie.director,\n        duration: movie.duration,\n        year: movie.year,\n        country: movie.country,\n        image: movie.image.url,\n        trailerLink: movie.trailerLink,\n        thumbnail: movie.image.formats.thumbnail.url\n      })\n    });\n    return this._processResponse(res);\n  }\n  async deleteExistentMovie(id) {\n    const res = await fetch(`${this._url}/movies/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\n      }\n    });\n    return this._processResponse(res);\n  }\n  async createUser({\n    name,\n    email,\n    password\n  }) {\n    const res = await fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    });\n    return this._processResponse(res);\n  }\n  async authorizeUser({\n    name,\n    email,\n    password\n  }) {\n    const res = await fetch(`${this._url}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    });\n    return this._processResponse(res);\n  }\n}\nconst mainApi = new MainApi({\n  url: \"https://api.moviesexplorer.aakond.nomoredomainsrocks.ru\"\n});\nexport default mainApi;","map":{"version":3,"names":["MainApi","constructor","url","_url","_processResponse","res","ok","json","Promise","reject","getUserData","fetch","method","headers","Authorization","localStorage","getItem","setUserData","userData","body","JSON","stringify","name","email","getSavedMovies","addNewMovie","movie","movieId","id","nameRU","nameEN","description","director","duration","year","country","image","trailerLink","thumbnail","formats","deleteExistentMovie","createUser","password","authorizeUser","mainApi"],"sources":["C:/Users/Andrey/Documents/GitHub/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\r\n  constructor({ url }) {\r\n    this._url = url;\r\n  }\r\n\r\n  _processResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(res);\r\n    }\r\n  }\r\n\r\n  async getUserData() {\r\n    const res = await fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\r\n      }\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n\r\n  async setUserData(userData) {\r\n    const res = await fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\r\n      },\r\n      body: JSON.stringify({\r\n        name: userData.name,\r\n        email: userData.email\r\n      })\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n\r\n  async getSavedMovies() {\r\n    const res = await fetch(`${this._url}/movies`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\r\n      }\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n\r\n  async addNewMovie(movie) {\r\n    const res = await fetch(`${this._url}/movies`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\r\n      },\r\n      body: JSON.stringify({\r\n        movieId: movie.id,\r\n        nameRU: movie.nameRU,\r\n        nameEN: movie.nameEN,\r\n        description: movie.description,\r\n        director: movie.director,\r\n        duration: movie.duration,\r\n        year: movie.year,\r\n        country: movie.country,\r\n        image: movie.image.url,\r\n        trailerLink: movie.trailerLink,\r\n        thumbnail: movie.image.formats.thumbnail.url\r\n      })\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n\r\n  async deleteExistentMovie(id) {\r\n    const res = await fetch(`${this._url}/movies/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`\r\n      }\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n\r\n  async createUser({ name, email, password }) {\r\n    const res = await fetch(`${this._url}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        email,\r\n        password\r\n      })\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n  \r\n  async authorizeUser({ name, email, password }) {\r\n    const res = await fetch(`${this._url}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        email,\r\n        password\r\n      })\r\n    });\r\n    return this._processResponse(res);\r\n  }\r\n}\r\n\r\nconst mainApi = new MainApi({\r\n  url: \"https://api.moviesexplorer.aakond.nomoredomainsrocks.ru\"\r\n});\r\n\r\nexport default mainApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}